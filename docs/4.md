# Episode 4: Adding More Bandages Features

Welcome back to another episode of MWSE Modding Tutorial. So our mod is almost complete. We'll be adding some additional features for bandages so they differs from a normal restore health potion and restore health spells.

## OAAB_Data Bandages

OAAB_Data actually has already added a feature for bandages. It plays the bandaging sound instead of the potion drinking sound. We can take a look at the script here in `\OAAB\MiscPotions\main.lua`.

```Lua
-- Prevent drink sounds
local function stopDrinkSounds(e)
    if not e.item.id:find("^AB_alc_") then return end

    addBlockedSound(e.reference, "drink")
    event.trigger("OAAB:equip", e)
end
event.register("equip", stopDrinkSounds, {priority = 1000})
```

It registers the `equip` event with very high priority to ensure it runs first. Then it checks if the `item` equip here has an `id` that starts with "AB_alc_". Here, the caret symbol `^` anchors the pattern at the beginning of the string.

Then it calls the `addBlockedSound()` function to block the drink sound from playing. Then it triggers a `"OAAB:equip"` event with `e` as the event data, which is the `equipEventData`. 

Next, let's look at another script from OAAB_Data, `\OAAB\Bandages\main.lua`. This is the script we are gonna base our script on. 

```Lua
local function bandageEquipEvent(e)
    if (e.item.id:find("^AB_alc_HealBandage")) then
        tes3.playSound({
            reference = e.reference,
            sound = "AB_Bandaging"
        })
    end
end
event.register("OAAB:equip", bandageEquipEvent)
```

It registers the `"OAAB:equip"` event instead of `equip`. This is to make sure that the script from `MiscPotions` runs first. Then it checks if the equip item `id` starts with "AB_alc_HealBandage". If so, play the "AB_Bandaging"`sound. 

So we're gonna write a script that's based on this logic to implement two features I want to add for bandages.

First is I want to get rid of the magical visual effect when using a bandage. 

The second feature I want to add is that the duration of the healing effect varies depending on your character's survival skill. So if your skill is at level 20, it heals for 20 seconds; and if your skill is at 40, heals 40 seconds.

So let's do that. First, we copy this script to our main.lua. And before we proceed any further, I would like to talk about credit. Do give credit to sources. 

To do that, we register the `OAAB:equip` event. This is an event added by OAAB_Data. We register this instead of `equip` to prevent the potion drink sounds from playing.

```Lua hl_lines="1-6 10"
---@param e equipEventData
local function bandageEquipEvent(e)
	if (e.item.id:find("^AB_alc_HealBandage")) then

	end
end
...
    event.register("Ashfall:ActivateBushcrafting:Registered",
	               registerBushcraftingRecipe)
    event.register("OAAB:equip", bandageEquipEvent)
    log:info("Initialized")
```